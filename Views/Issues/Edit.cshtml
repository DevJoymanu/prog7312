@model prog7312_st10161149_part1.Models.IssueReport
@{
    ViewData["Title"] = "Edit Issue";
}

<div class="form-container show">
    <a asp-action="Index" class="back-button">← Back to Issues</a>

    <div class="form-header">
        <h2 class="form-title">Edit Issue Report</h2>
        <p class="form-subtitle">Update the details of this municipal issue</p>
    </div>

    <form asp-action="Edit" method="post" id="editForm">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <input type="hidden" asp-for="Id" />

        <div class="form-group">
            <label asp-for="Location" class="form-label">📍 Issue Location</label>
            <input asp-for="Location" class="form-input" placeholder="Enter street address or landmark" />
            <span asp-validation-for="Location" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Category" class="form-label">🏷️ Issue Category</label>
            <select asp-for="Category" class="form-select">
                <option value="">Select a category</option>
                @foreach (var category in ViewBag.Categories as Dictionary<string, string>)
                {
                    <option value="@category.Key">@category.Value</option>
                }
            </select>
            <span asp-validation-for="Category" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Description" class="form-label">📝 Issue Description</label>
            <textarea asp-for="Description" class="form-textarea" placeholder="Provide a detailed description..." rows="5"></textarea>
            <span asp-validation-for="Description" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Status" class="form-label">📊 Issue Status</label>
            <select asp-for="Status" class="form-select">
                <option value="Submitted">Submitted</option>
                <option value="InProgress">In Progress</option>
                <option value="Resolved">Resolved</option>
                <option value="Closed">Closed</option>
            </select>
            <span asp-validation-for="Status" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="ReporterName" class="form-label">👤 Reporter Name (Optional)</label>
            <input asp-for="ReporterName" class="form-input" placeholder="Enter reporter name" />
            <span asp-validation-for="ReporterName" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="ReporterEmail" class="form-label">📧 Reporter Email (Optional)</label>
            <input asp-for="ReporterEmail" class="form-input" placeholder="Enter reporter email" />
            <span asp-validation-for="ReporterEmail" class="text-danger"></span>
        </div>

        <div class="button-group">
            <button type="submit" class="btn btn-primary">💾 Update Issue</button>
            <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-secondary">👁️ View Details</a>
            <a asp-action="Index" class="btn btn-secondary">📋 Back to List</a>
        </div>
    </form>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}